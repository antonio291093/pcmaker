(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,o)=>{t.exports=e.r(76562)},91837,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(43476),o=e.i(18566),i=e.i(71645),r=e.i(38325);let a="https://erp.pcmaker.mx";function s(){let[e,s]=(0,i.useState)(""),[n,l]=(0,i.useState)("");(0,o.useRouter)(),(0,i.useEffect)(()=>{fetch("".concat(a,"/api/usuarios/me"),{credentials:"include"}).then(e=>e.ok?e.json():Promise.reject()).then(e=>{if(e.user){let{rol_id:t}=e.user,o="";1===t?o="/admin":2===t?o="/tecnico":3===t&&(o="/ventas"),r.default.fire({icon:"success",title:"Ya estás logueado",timer:1e3,showConfirmButton:!1}).then(()=>{window.location.href=o})}}).catch(()=>{})},[]);let c=async t=>{t.preventDefault();try{let t=await fetch("".concat(a,"/api/usuarios/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:n})}),o=await t.json();if(!t.ok)return void r.default.fire({icon:"error",title:"Error",text:o.message||"Error de autenticación"});localStorage.setItem("email",o.user.email);let{rol_id:i}=o.user,s="";1===i?s="/admin":2===i?s="/tecnico":3===i&&(s="/ventas"),r.default.fire({icon:"success",title:"Bienvenido",text:"Has iniciado sesión como ".concat(o.user.email),timer:1500,showConfirmButton:!1}).then(()=>{window.location.href=s})}catch(e){r.default.fire({icon:"error",title:"Error de conexión",text:"No se pudo conectar con el servidor"})}};return(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md p-8 bg-white rounded-xl shadow-lg flex flex-col items-center",children:[(0,t.jsx)("img",{src:"/pcmaker.png",alt:"Logo del Negocio",className:"w-52 h-52 mb-6 object-contain"}),(0,t.jsxs)("form",{className:"w-full",onSubmit:c,children:[(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-700",children:"Correo electrónico"}),(0,t.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",placeholder:"tu@email.com",required:!0,className:"block w-full px-4 py-3 rounded-md border border-gray-200 focus:border-indigo-500 outline-none text-gray-700",value:e,onChange:e=>s(e.target.value)})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-700",children:"Contraseña"}),(0,t.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"••••••••",required:!0,className:"block w-full px-4 py-3 rounded-md border border-gray-200 focus:border-indigo-500 outline-none text-gray-700",value:n,onChange:e=>l(e.target.value)})]}),(0,t.jsx)("button",{type:"submit",className:"w-full py-3 mt-2 bg-indigo-500 hover:bg-indigo-600 rounded-md text-white font-semibold transition-colors",children:"Iniciar sesión"})]}),(0,t.jsx)("a",{href:"#",className:"mt-6 text-indigo-500 hover:underline text-sm",children:"¿Olvidaste tu contraseña?"})]})})}}]);